{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"RubikREST","text":"<p>RubikREST is a powerful library designed to create instant RESTful interfaces by connecting Rubik ORM to the Erlenmeyer framework.</p> <p>With just a few lines of code, you can expose your Models as full-featured API endpoints with support for advanced filtering, pagination, sorting, and automatic Swagger documentation.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>\ud83d\ude80 Automatic CRUD: Generates GET, POST, PATCH, and DELETE routes.</li> <li>\ud83d\udd0d Advanced Filters: Supports operators such as <code>eq</code>, <code>gt</code>, <code>like</code>, <code>in</code>, etc., via URL parameters.</li> <li>\ud83d\udcc4 Pagination and Sorting: Natively integrated.</li> <li>\u26a1 Eager Loading: Load relationships using the <code>?with=</code> parameter.</li> <li>\ud83d\udee1\ufe0f Security: Protection against Mass Assignment via <code>$fillable</code> and middleware support.</li> <li>\ud83d\udcd1 Swagger UI: Automatic generation of OpenAPI documentation.</li> <li>\ud83c\udf10 JS Client: Includes a lightweight JavaScript client for API consumption.</li> </ul>"},{"location":"#links","title":"Links","text":"<ul> <li>GitHub</li> <li>Packagist</li> </ul>"},{"location":"api-features/","title":"API Features","text":"<p><code>RubikREST</code> provides a powerful URL-based query language. All registered resources inherit these features automatically.</p>"},{"location":"api-features/#field-selection","title":"Field Selection","text":"<p>Return only the required data to save bandwidth.</p> <p><code>GET /api/users?select=id,name,email</code></p>"},{"location":"api-features/#pagination","title":"Pagination","text":"<p>Control how many records are returned.</p> <ul> <li><code>limit</code>: Number of records.</li> <li><code>offset</code>: Number of records to skip.</li> </ul> <p><code>GET /api/users?limit=10&amp;offset=20</code></p>"},{"location":"api-features/#sorting","title":"Sorting","text":"<p>Sort by one or more columns. Use the <code>column.direction</code> format.</p> <p><code>GET /api/products?order=price.desc,name.asc</code></p>"},{"location":"api-features/#eager-loading-relationships","title":"Eager Loading (Relationships)","text":"<p>Automatically load Rubik relationships in the response.</p> <p><code>GET /api/users?with=posts,profile</code></p>"},{"location":"api-features/#filters-where","title":"Filters (Where)","text":"<p>You can filter any column using the <code>column.operator=value</code> syntax. If the operator is omitted, equality (<code>eq</code>) is assumed.</p>"},{"location":"api-features/#available-operators","title":"Available Operators","text":"Operator URL Example SQL Equivalent Equality <code>status=active</code> or <code>status.eq=active</code> <code>WHERE status = 'active'</code> Not equal <code>status.neq=banned</code> <code>WHERE status &lt;&gt; 'banned'</code> Greater than <code>age.gt=18</code> <code>WHERE age &gt; 18</code> Greater than or equal <code>age.gte=18</code> <code>WHERE age &gt;= 18</code> Less than <code>price.lt=100</code> <code>WHERE price &lt; 100</code> Less than or equal <code>price.lte=100</code> <code>WHERE price &lt;= 100</code> Like (Search) <code>name.like=Jo*</code> (use <code>*</code> as wildcard) <code>WHERE name LIKE 'Jo%'</code> ILike (Case insensitive) <code>name.ilike=jo*</code> <code>WHERE name ILIKE 'jo%'</code> IN (List) <code>id.in=1,2,3</code> <code>WHERE id IN (1, 2, 3)</code> IS (Boolean/Null) <code>deleted_at.is=null</code> <code>WHERE deleted_at IS NULL</code> <p>Wildcard Tip</p> <p>In <code>like</code> and <code>ilike</code> filters, use the asterisk <code>*</code> in the URL to represent SQL\u2019s <code>%</code>. The system performs the substitution automatically.</p>"},{"location":"api-features/#total-count","title":"Total Count","text":"<p>To retrieve the total number of records (useful for frontend pagination), add <code>count</code> to the query. The result will be returned in the <code>count</code> key of the JSON response.</p> <p><code>GET /api/users?limit=5&amp;count</code></p>"},{"location":"installation/","title":"Installation","text":"<p>RubikREST is distributed via Composer.</p>"},{"location":"installation/#requirements","title":"Requirements","text":"<ul> <li>PHP 8.0 or higher</li> <li><code>adaiasmagdiel/erlenmeyer</code> ^5.0</li> <li><code>adaiasmagdiel/rubik</code> ^6.0</li> </ul>"},{"location":"installation/#installing-via-composer","title":"Installing via Composer","text":"<p>Run the following command in your project\u2019s root directory:</p> <pre><code>composer require adaiasmagdiel/rubik-rest\n</code></pre>"},{"location":"js-client/","title":"JavaScript Client","text":"<p>The package includes the <code>RubikREST.js</code> file, a lightweight wrapper around the Fetch API designed to simplify data consumption on the frontend.</p>"},{"location":"js-client/#installation","title":"Installation","text":"<p>Copy the <code>RubikREST.js</code> file into your frontend project or import it if you are using a bundler.</p> <pre><code>import { RubikClient } from \"./path/to/RubikREST.js\";\n</code></pre>"},{"location":"js-client/#initialization","title":"Initialization","text":"<pre><code>const api = new RubikClient(\"https://mysite.com/api\", {\n  Authorization: \"Bearer mytoken123\",\n});\n</code></pre>"},{"location":"js-client/#consuming-resources","title":"Consuming Resources","text":"<p>The client uses a fluent (chainable) pattern to build queries.</p>"},{"location":"js-client/#listing-data-get","title":"Listing Data (GET)","text":"<pre><code>const response = await api\n  .from(\"users\")\n  .select([\"id\", \"name\"])\n  .with(\"posts\")\n  .where(\"age\", \"gte\", 18)\n  .orderBy(\"name\", \"asc\")\n  .page(1, 15) // Page 1, 15 items per page\n  .withCount() // Requests the total record count\n  .get();\n\nif (response.data) {\n  console.log(response.data); // Array of users\n  console.log(response.count); // Total records\n} else {\n  console.error(response.error);\n}\n</code></pre>"},{"location":"js-client/#crud-operations","title":"CRUD Operations","text":""},{"location":"js-client/#create-post","title":"Create (POST)","text":"<pre><code>const res = await api.from(\"users\").create({\n  name: \"Ada\u00edas\",\n  email: \"teste@teste.com\",\n});\n</code></pre>"},{"location":"js-client/#fetch-one-get-by-id","title":"Fetch One (GET by ID)","text":"<pre><code>const res = await api.from(\"users\").find(1);\n</code></pre>"},{"location":"js-client/#update-patch","title":"Update (PATCH)","text":"<pre><code>const res = await api.from(\"users\").update(1, {\n  name: \"Ada\u00edas Magdiel\",\n});\n</code></pre>"},{"location":"js-client/#delete-delete","title":"Delete (DELETE)","text":"<pre><code>await api.from(\"users\").delete(1);\n</code></pre>"},{"location":"js-client/#filter-helper-methods","title":"Filter Helper Methods","text":"<p>The JS client provides shortcuts for all API operators:</p> <pre><code>api\n  .from(\"products\")\n  .eq(\"category\", \"electronics\")\n  .gt(\"price\", 100)\n  .like(\"name\", \"Smart*\")\n  .in(\"status\", [\"instock\", \"preorder\"])\n  .get();\n</code></pre>"},{"location":"quickstart/","title":"Basic Configuration","text":"<p>See how to configure your REST API in minutes.</p>"},{"location":"quickstart/#1-configuring-the-application","title":"1. Configuring the Application","text":"<p>In your application entry file (where you instantiate the Erlenmeyer <code>App</code>), configure RubikREST.</p> <pre><code>&lt;?php\nrequire 'vendor/autoload.php';\n\nuse AdaiasMagdiel\\Erlenmeyer\\App;\nuse AdaiasMagdiel\\RubikREST\\RubikREST;\nuse App\\Models\\User;\nuse App\\Models\\Product;\n\n$app = new App();\n\n// 1. Start configuration (default prefix: /api)\nRubikREST::configure($app, '/api')\n\n    // 2. Register Resources\n    -&gt;resource('users', User::class)\n    -&gt;resource('products', Product::class)\n\n    // 3. (Optional) Enable Swagger UI at /docs\n    -&gt;enableDocs('/docs');\n\n$app-&gt;run();\n</code></pre>"},{"location":"quickstart/#2-creating-the-model","title":"2. Creating the Model","text":"<p>Your models must extend the Rubik <code>Model</code> class and should ideally define the <code>$fillable</code> property for security.</p> <pre><code>&lt;?php\nnamespace App\\Models;\n\nuse AdaiasMagdiel\\Rubik\\Column;\nuse AdaiasMagdiel\\Rubik\\Model;\n\nclass User extends Model\n{\n    protected static string $table = 'users';\n\n    // Defines which fields can be created/updated via the API\n    public static array $fillable = ['name', 'email', 'username'];\n\n    // Required to correctly generate the Swagger schema\n    public static function fields(): array\n    {\n        return [\n            'id'       =&gt; Column::Serial(primaryKey: true),\n            'name'     =&gt; Column::Varchar(length: 120, notNull: true),\n            'username' =&gt; Column::Varchar(length: 30, notNull: true, unique: true),\n            'email'    =&gt; Column::Varchar(length: 255, notNull: true, unique: true),\n            // ...\n        ];\n    }\n}\n</code></pre>"},{"location":"quickstart/#3-testing","title":"3. Testing","text":"<p>You can now access:</p> <ul> <li>List users: <code>GET /api/users</code></li> <li>Create user: <code>POST /api/users</code></li> <li>View documentation: <code>GET /docs</code></li> </ul>"},{"location":"security/","title":"Security","text":""},{"location":"security/#protection-against-mass-assignment","title":"Protection Against Mass Assignment","text":"<p>RubikREST automatically checks the <code>$fillable</code> property on your Rubik Models before persisting data to the database (Create and Update operations).</p> <p>If <code>$fillable</code> is defined, only the listed fields will be saved. Any other fields sent in the JSON payload will be silently ignored.</p> <pre><code>// In your Model\npublic static array $fillable = ['name', 'bio'];\n\n// Malicious payload sent: {\"name\": \"X\", \"is_admin\": true}\n// Result: Only \"name\" is saved. \"is_admin\" is discarded.\n</code></pre> <p>Permissive Mode</p> <p>If <code>$fillable</code> is not defined on the Model, RubikREST will accept all submitted fields. It is highly recommended to define <code>$fillable</code> in production.</p>"},{"location":"security/#middlewares","title":"Middlewares","text":"<p>You can apply middlewares (authentication, logging, rate limiting) to specific resources during registration.</p> <pre><code>use App\\Middlewares\\AuthMiddleware;\n\nRubikREST::configure($app)\n    -&gt;resource('admin/logs', Log::class, [AuthMiddleware::class]);\n</code></pre>"},{"location":"security/#error-handling","title":"Error Handling","text":"<p>The controller catches exceptions and returns semantic HTTP status codes:</p> <ul> <li>400 Bad Request: Invalid JSON or a non-existent column requested.</li> <li>404 Not Found: Record not found.</li> <li>409 Conflict: Integrity violation (e.g., duplicate unique key).</li> <li>500 Internal Server Error: General errors (details hidden if <code>APP_DEBUG</code> is false).</li> </ul>"}]}