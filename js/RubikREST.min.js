class RubikClient{constructor(t,e={}){this.baseUrl=t.replace(/\/+$/,""),this.headers={"Content-Type":"application/json",Accept:"application/json",...e}}from(t){return new RubikResource(this,t)}}class RubikResource{constructor(t,e){this.client=t,this.resourceName=e,this.endpoint=`${t.baseUrl}/${e}`,this._queryParams=new URLSearchParams}async find(t){return this._request("GET",`${this.endpoint}/${t}`)}async create(t){return this._request("POST",this.endpoint,t)}async update(t,e){return this._request("PATCH",`${this.endpoint}/${t}`,e)}async delete(t){return this._request("DELETE",`${this.endpoint}/${t}`)}select(t){const e=Array.isArray(t)?t.join(","):t;return this._queryParams.set("select",e),this}with(t){const e=Array.isArray(t)?t.join(","):t;return this._queryParams.set("with",e),this}where(t,e,r){return this._queryParams.append(`${t}.${e}`,r),this}eq(t,e){return this.where(t,"eq",e)}neq(t,e){return this.where(t,"neq",e)}gt(t,e){return this.where(t,"gt",e)}gte(t,e){return this.where(t,"gte",e)}lt(t,e){return this.where(t,"lt",e)}lte(t,e){return this.where(t,"lte",e)}like(t,e){return this.where(t,"like",e)}ilike(t,e){return this.where(t,"ilike",e)}is(t,e){return this.where(t,"is",e)}in(t,e){return this.where(t,"in",Array.isArray(e)?e.join(","):e)}orderBy(t,e="asc"){return this._queryParams.append("order",`${t}.${e}`),this}limit(t){return this._queryParams.set("limit",t),this}offset(t){return this._queryParams.set("offset",t),this}page(t,e=20){const r=(t-1)*e;return this.limit(e),this.offset(r),this}withCount(){return this._queryParams.set("count","true"),this}async get(){const t=this._queryParams.toString(),e=`${this.endpoint}${t?"?"+t:""}`;return this._request("GET",e)}async _request(t,e,r=null){const s={method:t,headers:this.client.headers};r&&(s.body=JSON.stringify(r));try{const t=await fetch(e,s),r=t.headers.get("content-type")?.includes("application/json");let i=null;r&&(i=await t.json());const n={data:i?.data??null,count:i?.count??null,error:i?.error??null,status:t.status};return t.ok||n.error||(n.error={message:t.statusText,code:t.status}),n}catch(t){return{data:null,count:null,error:t.message,status:0}}}}"undefined"!=typeof module&&module.exports?module.exports={RubikClient:RubikClient}:window.RubikClient=RubikClient;
//# sourceMappingURL=RubikREST.min.js.map